set system host-name r2
#
set interfaces ge-0/0/0 unit 0 family inet address 172.16.10.2/30
set interfaces lo0 unit 0 family inet address 2.2.2.2/32
#
# This route should not appear in R1 RIB because R1 doesn't import community 100:1001
set routing-options static route 10.20.20.0/24 discard
set routing-options static route 10.20.20.0/24 community 100:1001
#
# These routes should appear in R1 RIB
set routing-options static route 10.20.20.0/23 discard
set routing-options static route 10.20.20.0/23 community 100:1002
set routing-options static route 10.20.22.0/24 discard
#
set routing-options autonomous-system 100
#
set protocols bgp group GROUP1 type internal
set protocols bgp group GROUP1 local-address 2.2.2.2
set protocols bgp group GROUP1 family inet unicast
set protocols bgp group GROUP1 export IBGP-EXPORT
set protocols bgp group GROUP1 peer-as 100
set protocols bgp group GROUP1 neighbor 1.1.1.1
#
set protocols ospf area 0.0.0.0 interface ge-0/0/0.0
set protocols ospf area 0.0.0.0 interface lo0.0
#
set policy-options policy-statement IBGP-EXPORT term TERM01 from protocol static
set policy-options policy-statement IBGP-EXPORT term TERM01 then accept
set policy-options policy-statement IBGP-EXPORT then reject
