set system host-name juniper-interface-ribgroup-with-policy
#
set routing-options interface-routes rib-group inet interface-routes-rib
set routing-options rib-groups interface-routes-rib import-rib inet.0
set routing-options rib-groups interface-routes-rib import-rib VRF2.inet.0
#
# policies should be chained (OR-ed) and applied on import to main RIBs
#
set routing-options rib-groups interface-routes-rib import-policy RIB_IN
set routing-options rib-groups interface-routes-rib import-policy RIB_IN_2
#
set interfaces lo0 unit 0 family inet address 1.1.1.1/32
set interfaces ge-0/0/0 unit 0 family inet address 2.2.2.2/31
set interfaces ge-0/0/1 unit 0 family inet address 2.2.2.4/31
set interfaces ge-0/0/2 unit 0 family inet address 2.2.2.6/31
#
set routing-instances VRF2 interface ge-0/0/3.0
set interfaces ge-0/0/3 unit 0 family inet address 2.2.2.8/31
#
# The policies are supposed to be chained together
set policy-options policy-statement RIB_IN term TERM1 from route-filter 2.2.2.2/31 exact
set policy-options policy-statement RIB_IN term TERM1 from route-filter 2.2.2.4/31 exact 
set policy-options policy-statement RIB_IN term TERM1 then accept
#
set policy-options policy-statement RIB_IN_2 term TERM1 from route-filter 2.2.2.6/31 exact
set policy-options policy-statement RIB_IN_2 term TERM1 then reject
#
