set system host-name r1
#
set interfaces ge-0/0/0 unit 0 family inet address 172.16.10.1/30
set interfaces lo0 unit 0 family inet address 1.1.1.1/32
#
set routing-options autonomous-system 100
#
set protocols bgp group GROUP1 type internal
set protocols bgp group GROUP1 local-address 1.1.1.1
set protocols bgp group GROUP1 import IBGP-IMPORT
set protocols bgp group GROUP1 family inet unicast
set protocols bgp group GROUP1 peer-as 100
set protocols bgp group GROUP1 neighbor 2.2.2.2
#
set protocols ospf area 0.0.0.0 interface ge-0/0/0.0
set protocols ospf area 0.0.0.0 interface lo0.0
#
# Reject routes with community 100:1001
set policy-options community COMM1 members 100:1001
set policy-options policy-statement IBGP-IMPORT term TERM01 from community COMM1
set policy-options policy-statement IBGP-IMPORT term TERM01 then reject
set policy-options policy-statement IBGP-IMPORT term DEFAULT then accept
