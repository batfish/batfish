net del all
#
net add hostname cumulus_nclu_evpn
#
net add bgp autonomous-system 65500
net add bgp l2vpn evpn advertise-all-vni
net add bgp l2vpn evpn advertise-default-gw
net add bgp router-id 192.0.2.3
net add bgp l2vpn evpn advertise ipv4 unicast
net add bgp neighbor swp1 interface remote-as external
net add bgp l2vpn evpn neighbor swp1 activate
net add vrf vrf1 vni 10004
net add vxlan vni10001 bridge access 5
net add vxlan vni10001 vxlan id 10001
net add vxlan vni10001 vxlan local-tunnelip 192.0.2.11
net add vxlan vni10004 vxlan id 10004
net add vxlan vni10004 vxlan local-tunnelip 192.0.2.14
net add vxlan vni10005 vxlan id 10005
net add vxlan vni10005 vxlan local-tunnelip 192.0.2.15
net add interface swp1
net commit

# The following will append those commands to the appropriate files.
# There are some configuration commands that are not yet supported by nclu.
# ========================================================================
sudo sh -c "printf 'username cumulus nopassword\n' >> /etc/frr/frr.conf"
sudo sh -c "printf 'vrf vrf1\n  ip route 0.0.0.0/0 192.0.2.1\n' >> /etc/frr/frr.conf"
